import{d as $,s as M,i as F,j as W,N as X,O as Y,z as Z,o as s,a as B,m as e,w as o,e as l,n as ee,F as te,r as ae,C as d,p as m,b as V,B as c,Q as P,G as R,t as C,D as oe,H as U,I as le,E as ne,v as ie,q as se,_ as de,J as me,K as re}from"./index-CSq49O89.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang-CwpZ7A-x.js";import{E as ue,a as ce}from"./el-table-column-afY-Q-c0.js";import"./el-checkbox-Duk-MLvO.js";import"./el-tag-DCrYKok3.js";import{E as _e}from"./el-card-1PlMbrNj.js";import{E as fe,a as ge}from"./el-form-item-D2KaSZi6.js";import{E as ve,a as we}from"./el-select-myCgb1GQ.js";import{h as be,m as ye,n as he,o as Ce}from"./goods-D00gdu2c.js";import{u as ke}from"./useDictOptions-B46o9f4U.js";import{u as Ve}from"./usePaging-BVI2Oa_R.js";import{_ as Ee}from"./fenpei.vue_vue_type_script_setup_true_name_articleColumnEdit_lang-Jl_-mptj.js";import"./isEqual-CRCllESj.js";import"./_Uint8Array-RBynhHOx.js";import"./_initCloneObject-BqQRiPFL.js";import"./_baseClone-BTZRmIOm.js";import"./index-DaxyzSap.js";import"./token-DI9FKtlJ.js";import"./index-BSLFXMtF.js";import"./index-CB0jx4a8.js";const xe={class:"goods-lists"},De={class:"float-right"},Se={class:"flex justify-end mt-4"},Fe=$({name:"goodsLists"}),Xe=$({...Fe,setup(Be){const f=M(),y=F(!1),k=F([]),L=i=>{k.value=i},r=W({name:"",cid:"",status:""}),N=async i=>{var t,v;y.value=!0,await U(),(t=f.value)==null||t.open("one"),(v=f.value)==null||v.getDetail(i)},I=async()=>{var i,t;y.value=!0,await U(),(i=f.value)==null||i.open("all"),(t=f.value)==null||t.getDetail(k.value)},{pager:g,getLists:p,resetPage:E,resetParams:K}=Ve({fetchFun:Ce,params:r}),{optionsData:T}=ke({goods_cate:{api:be}}),q=async(i,t)=>{try{await ye({id:t,status:i}),p()}catch{p()}},A=async i=>{await le.confirm("确定要删除？"),await he({id:i}),p()};return X(()=>{p()}),p(),(i,t)=>{const v=ne,h=fe,w=ve,x=we,u=ie,O=ge,D=_e,j=se,S=Y("router-link"),n=ue,z=de,G=me,H=ce,J=pe,_=Z("perms"),Q=re;return s(),B("div",xe,[e(D,{class:"!border-none",shadow:"never"},{default:o(()=>[e(O,{ref:"formRef",class:"mb-[-16px]",model:l(r),inline:!0},{default:o(()=>[e(h,{class:"w-[280px]",label:"标题"},{default:o(()=>[e(v,{modelValue:l(r).name,"onUpdate:modelValue":t[0]||(t[0]=a=>l(r).name=a),placeholder:"输入标题",clearable:"",onKeyup:ee(l(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(h,{class:"w-[280px]",label:"分类名称"},{default:o(()=>[e(x,{modelValue:l(r).cid,"onUpdate:modelValue":t[1]||(t[1]=a=>l(r).cid=a)},{default:o(()=>[e(w,{label:"全部",value:""}),(s(!0),B(te,null,ae(l(T).goods_cate,a=>(s(),d(w,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(h,{class:"w-[280px]",label:"状态"},{default:o(()=>[e(x,{modelValue:l(r).status,"onUpdate:modelValue":t[2]||(t[2]=a=>l(r).status=a)},{default:o(()=>[e(w,{label:"全部",value:""}),e(w,{label:"显示",value:1}),e(w,{label:"隐藏",value:0})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:o(()=>[e(u,{type:"primary",onClick:l(E)},{default:o(()=>t[5]||(t[5]=[m("查询")])),_:1},8,["onClick"]),e(u,{onClick:l(K)},{default:o(()=>t[6]||(t[6]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(D,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[V("div",null,[V("div",De,[c((s(),d(S,{to:{path:l(P)("waimai.goods/add:edit")}},{default:o(()=>[e(u,{type:"primary",class:"mb-4"},{icon:o(()=>[e(j,{name:"el-icon-Plus"})]),default:o(()=>[t[7]||(t[7]=m(" 新增 "))]),_:1})]),_:1},8,["to"])),[[_,["waimai.goods/add","waimai.goods/add:edit"]]])]),c((s(),d(u,{type:"primary",class:"mb-4",disabled:l(k).length<=0,onClick:I},{default:o(()=>t[8]||(t[8]=[m(" 批量分配 ")])),_:1},8,["disabled"])),[[_,["waimai.goods/fenpei"]]])]),c((s(),d(H,{size:"large",data:l(g).lists,onSelectionChange:L},{default:o(()=>[e(n,{type:"selection",width:"55"}),e(n,{label:"ID",prop:"id","min-width":"80"}),e(n,{label:"商品图片","min-width":"100"},{default:o(({row:a})=>[a.image?(s(),d(z,{key:0,src:a.image,width:60,height:45,"preview-src-list":[a.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):R("",!0)]),_:1}),e(n,{label:"标题",prop:"name","min-width":"160","show-tooltip-when-overflow":""}),e(n,{label:"分类",prop:"cate_name","min-width":"100"}),e(n,{label:"商品价格","min-width":"120"},{default:o(({row:a})=>[m(C(a.amount)+" "+C(a.fee_type),1)]),_:1}),e(n,{label:"商品价格","min-width":"120"},{default:o(({row:a})=>[m(C(a.reality_amount)+" "+C(a.fee_type),1)]),_:1}),e(n,{label:"状态","min-width":"100"},{default:o(({row:a})=>[c(e(G,{modelValue:a.status,"onUpdate:modelValue":b=>a.status=b,"active-value":1,"inactive-value":0,onChange:b=>q(b,a.id)},null,8,["modelValue","onUpdate:modelValue","onChange"]),[[_,["waimai.goods/updateStatus"]]])]),_:1}),e(n,{label:"排序",prop:"sort","min-width":"100"}),e(n,{label:"修改时间",prop:"update_time","min-width":"120"}),e(n,{label:"修改人",prop:"update_name","min-width":"120"}),e(n,{label:"创建时间",prop:"create_time","min-width":"120"}),e(n,{label:"创建人",prop:"create_name","min-width":"120"}),e(n,{label:"操作",width:"200",fixed:"right"},{default:o(({row:a})=>[c((s(),d(u,{type:"primary",link:"",onClick:b=>N(a)},{default:o(()=>t[9]||(t[9]=[m(" 分配 ")])),_:2},1032,["onClick"])),[[_,["waimai.goods/fenpei"]]]),c((s(),d(u,{type:"primary",link:""},{default:o(()=>[e(S,{to:{path:l(P)("waimai.goods/add:edit"),query:{id:a.id}}},{default:o(()=>t[10]||(t[10]=[m(" 编辑 ")])),_:2},1032,["to"])]),_:2},1024)),[[_,["waimai.goods/edit","waimai.goods/add:edit"]]]),c((s(),d(u,{type:"danger",link:"",onClick:b=>A(a.id)},{default:o(()=>t[11]||(t[11]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[_,["waimai.goods/delete"]]])]),_:1})]),_:1},8,["data"])),[[Q,l(g).loading]]),V("div",Se,[e(J,{modelValue:l(g),"onUpdate:modelValue":t[3]||(t[3]=a=>oe(g)?g.value=a:null),onChange:l(p)},null,8,["modelValue","onChange"])])]),_:1}),l(y)?(s(),d(Ee,{key:0,ref_key:"fenpeiRef",ref:f,onSuccess:l(p),onClose:t[4]||(t[4]=a=>y.value=!1)},null,8,["onSuccess"])):R("",!0)])}}});export{Xe as default};
