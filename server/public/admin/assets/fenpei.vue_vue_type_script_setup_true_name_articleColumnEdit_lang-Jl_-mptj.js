import{d as h,s as g,i as d,c as D,j as P,o as u,a as v,m as l,w as n,e as a,F as S,r as j,C as q}from"./index-CSq49O89.js";import{E as z,a as I}from"./el-form-item-D2KaSZi6.js";import"./el-tag-DCrYKok3.js";import{E as M,a as N}from"./el-select-myCgb1GQ.js";import{k as O,l as T}from"./goods-D00gdu2c.js";import{P as U}from"./index-BSLFXMtF.js";const A={class:"edit-popup"},G=h({name:"articleColumnEdit"}),Z=h({...G,emits:["success","close"],setup(H,{expose:y,emit:w}){const m=w,p=g(),r=g(),f=d("add"),k=D(()=>f.value=="one"?"分配商品":"批量分配商品"),i=d(!1),_=d([]),t=P({uid:"",type:"one",gid:"",gidList:[]}),E={uid:[{required:!0,message:"请选择要分配的用户",trigger:["blur"]}]},x=async o=>{i.value=!0;const e=await O({keyword:o,page_size:50});i.value=!1,_.value=e.lists},b=async()=>{var o,e;await((o=p.value)==null?void 0:o.validate()),await T(t),(e=r.value)==null||e.close(),m("success")},C=(o="one")=>{var e;f.value=o,t.type=o,(e=r.value)==null||e.open()},R=async o=>{if(t.type=="one")t.gid=o.id;else{let e=[];o.forEach(c=>{e.push(c.id)}),t.gidList=e}},F=()=>{m("close")};return y({open:C,getDetail:R}),(o,e)=>{const c=M,L=N,V=z,B=I;return u(),v("div",A,[l(U,{ref_key:"popupRef",ref:r,title:a(k),async:!0,width:"550px",onConfirm:b,onClose:F,center:""},{default:n(()=>[l(B,{ref_key:"formRef",ref:p,model:a(t),"label-width":"120px",rules:E},{default:n(()=>[l(V,{label:"分配的用户",prop:"uid"},{default:n(()=>[l(L,{modelValue:a(t).uid,"onUpdate:modelValue":e[0]||(e[0]=s=>a(t).uid=s),filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入关键字进行搜索","remote-show-suffix":"","remote-method":x,loading:a(i),style:{width:"240px"}},{default:n(()=>[(u(!0),v(S,null,j(a(_),s=>(u(),q(c,{key:s.id,label:s.name+"("+s.account+")",value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{Z as _};
