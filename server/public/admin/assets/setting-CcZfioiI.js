import{_ as U}from"./index-Oz8ZN4Ws.js";import{d as f,i as k,f as I,j as _,o as x,a as B,m as r,w as a,e as s,b as n,p as C,E as S,v as M,I as m,fi as N}from"./index-CSq49O89.js";import{E as q}from"./el-card-1PlMbrNj.js";import{E as F,a as R}from"./el-form-item-D2KaSZi6.js";import{_ as j}from"./picker-B5B6R_zK.js";import"./_baseClone-BTZRmIOm.js";import"./_Uint8Array-RBynhHOx.js";import"./_initCloneObject-BqQRiPFL.js";import"./index-BSLFXMtF.js";import"./index-CB0jx4a8.js";import"./index-B54jx6w6.js";import"./index.vue_vue_type_script_setup_true_lang-CwpZ7A-x.js";import"./el-tag-DCrYKok3.js";import"./isEqual-CRCllESj.js";import"./el-select-myCgb1GQ.js";import"./index-DaxyzSap.js";import"./token-DI9FKtlJ.js";import"./el-table-column-afY-Q-c0.js";import"./el-checkbox-Duk-MLvO.js";import"./index-Kx7Gr6CY.js";import"./index-Dyr4F-P4.js";import"./el-tree-CPgl9nFa.js";import"./index.vue_vue_type_script_setup_true_lang-aMUdrref.js";import"./el-popover-B8L4KBZS.js";import"./usePaging-BVI2Oa_R.js";const D={class:"user-setting"},T={class:"w-80"},z={class:"w-80"},A={class:"w-80"},G={class:"w-80"},H={class:"w-80"},J={class:"w-80"},K={class:"w-80"},L=f({name:"userSetting"}),bo=f({...L,setup(O){const u=k(),i=I();console.log(i);const o=_({avatar:"",account:"",user_money:"",total_recharge_amount:"",name:"",password_old:"",password:"",password_confirm:""}),c=_({avatar:[{required:!0,message:"头像不能为空",trigger:["change"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}]}),w=async()=>{const p=i.userInfo;for(const e in o)o[e]=p[e]},g=async()=>{if(o.password_old||o.password||o.password_confirm){if(!o.password_old)return m.msgError("请输入当前密码");if(!o.password)return m.msgError("请输入新的密码");if(!o.password_confirm)return m.msgError("请输入确定密码");if(o.password_confirm!=o.password)return m.msgError("两次输入的密码不一样")}if(o.password_old&&o.password&&o.password_confirm){if(o.password_old.length<6||o.password_old.length>32)return m.msgError("密码长度在6到32之间");if(o.password.length<6||o.password.length>32)return m.msgError("密码长度在6到32之间");if(o.password_confirm.length<6||o.password_confirm.length>32)return m.msgError("密码长度在6到32之间")}await N(o),i.getUserInfo()},V=async()=>{var p;await((p=u.value)==null?void 0:p.validate()),g()};return w(),(p,e)=>{const b=j,l=F,d=S,v=R,E=q,y=M,h=U;return x(),B("div",D,[r(E,{class:"!border-none",shadow:"never"},{default:a(()=>[r(v,{ref_key:"formRef",ref:u,class:"ls-form",model:s(o),rules:s(c),"label-width":"100px"},{default:a(()=>[r(l,{label:"头像：",prop:"avatar"},{default:a(()=>[r(b,{modelValue:s(o).avatar,"onUpdate:modelValue":e[0]||(e[0]=t=>s(o).avatar=t),limit:1},null,8,["modelValue"])]),_:1}),r(l,{label:"账号：",prop:"account"},{default:a(()=>[n("div",T,[r(d,{modelValue:s(o).account,"onUpdate:modelValue":e[1]||(e[1]=t=>s(o).account=t),disabled:""},null,8,["modelValue"])])]),_:1}),r(l,{label:"余额：",prop:"user_money"},{default:a(()=>[n("div",z,[r(d,{modelValue:s(o).user_money,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).user_money=t),disabled:""},null,8,["modelValue"])])]),_:1}),r(l,{label:"累计充值：",prop:"total_recharge_amount"},{default:a(()=>[n("div",A,[r(d,{modelValue:s(o).total_recharge_amount,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).total_recharge_amount=t),disabled:""},null,8,["modelValue"])])]),_:1}),r(l,{label:"名称：",prop:"name"},{default:a(()=>[n("div",G,[r(d,{modelValue:s(o).name,"onUpdate:modelValue":e[4]||(e[4]=t=>s(o).name=t),placeholder:"请输入名称"},null,8,["modelValue"])])]),_:1}),r(l,{label:"当前密码：",prop:"password_old"},{default:a(()=>[n("div",H,[r(d,{modelValue:s(o).password_old,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).password_old=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),r(l,{label:"新的密码：",prop:"password"},{default:a(()=>[n("div",J,[r(d,{modelValue:s(o).password,"onUpdate:modelValue":e[6]||(e[6]=t=>s(o).password=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),r(l,{label:"确定密码：",prop:"password_confirm"},{default:a(()=>[n("div",K,[r(d,{modelValue:s(o).password_confirm,"onUpdate:modelValue":e[7]||(e[7]=t=>s(o).password_confirm=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),r(h,null,{default:a(()=>[r(y,{type:"primary",onClick:V},{default:a(()=>e[8]||(e[8]=[C("保存")])),_:1})]),_:1})])}}});export{bo as default};
