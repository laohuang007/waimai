import{d as P,s as B,i as b,j as se,N as ie,O as F,z as L,o as m,a as de,m as l,w as t,e as a,n as $,p as i,B as c,C as u,G,t as _,b as D,D as I,Y as re,H as N,I as O,E as me,v as ue,_ as pe,S as fe,K as ce}from"./index-CSq49O89.js";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang-CwpZ7A-x.js";import{E as ve,a as ye}from"./el-table-column-afY-Q-c0.js";import"./el-checkbox-Duk-MLvO.js";import"./el-tag-DCrYKok3.js";import{E as we}from"./el-card-1PlMbrNj.js";import{E as ge,a as Ce}from"./el-form-item-D2KaSZi6.js";import{E as be,a as ke}from"./el-select-myCgb1GQ.js";import{q as Ve,r as Ee,s as he}from"./goods-D00gdu2c.js";import{u as De}from"./usePaging-BVI2Oa_R.js";import{_ as xe}from"./edit.vue_vue_type_script_setup_true_name_articleColumnEdit_lang-B9acx0Aa.js";import{_ as Se}from"./order.vue_vue_type_script_setup_true_name_articleColumnEdit_lang-BQLiEo6w.js";import{E as $e}from"./index-CB0jx4a8.js";import"./isEqual-CRCllESj.js";import"./_Uint8Array-RBynhHOx.js";import"./_initCloneObject-BqQRiPFL.js";import"./_baseClone-BTZRmIOm.js";import"./index-DaxyzSap.js";import"./token-DI9FKtlJ.js";import"./index.vue_vue_type_style_index_0_lang-Czh617Y2.js";import"./picker-B5B6R_zK.js";import"./index-BSLFXMtF.js";import"./index-B54jx6w6.js";import"./index-Kx7Gr6CY.js";import"./index-Dyr4F-P4.js";import"./el-tree-CPgl9nFa.js";import"./index.vue_vue_type_script_setup_true_lang-aMUdrref.js";import"./el-popover-B8L4KBZS.js";const Ge={class:"goods-lists"},Ie={class:"flex justify-end mt-4"},Ue={class:"my-header"},Ke=["id"],Re=P({name:"goodsLists"}),ul=P({...Re,setup(Be){const k=B(),U=b(!1),x=B(),V=b(!1),T=b([]),v=b(!1),y=b(""),z=s=>{T.value=s},d=se({name:"",gid:"",uid:"",status:""}),H=s=>{var e;y.value=s.url,v.value=!0,(e=k.value)==null||e.close()},j=async s=>{var e,r;U.value=!0,await N(),(e=k.value)==null||e.open(),(r=k.value)==null||r.getDetail(s)},q=async s=>{var e,r;V.value=!0,await N(),(e=x.value)==null||e.open(),(r=x.value)==null||r.getDetail(s)},{pager:w,getLists:f,resetPage:E,resetParams:A}=De({fetchFun:he,params:d}),Y=async s=>{await O.confirm("确定要删除？"),await Ve({id:s}),f()},J=async s=>{await O.confirm("确定要恢复？"),await Ee({id:s}),f()};return ie(()=>{f()}),f(),(s,e)=>{const r=me,g=ge,S=be,M=ke,p=ue,Q=Ce,K=we,n=ve,W=pe,X=ye,Z=_e,ee=F("CircleCloseFilled"),R=fe,le=F("CopyDocument"),oe=$e,h=L("perms"),te=ce,ae=L("copy");return m(),de("div",Ge,[l(K,{class:"!border-none",shadow:"never"},{default:t(()=>[l(Q,{ref:"formRef",class:"mb-[-16px]",model:a(d),inline:!0},{default:t(()=>[l(g,{class:"w-[280px]",label:"标题"},{default:t(()=>[l(r,{modelValue:a(d).name,"onUpdate:modelValue":e[0]||(e[0]=o=>a(d).name=o),placeholder:"输入标题",clearable:"",onKeyup:$(a(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(g,{class:"w-[280px]",label:"商品原始ID"},{default:t(()=>[l(r,{modelValue:a(d).gid,"onUpdate:modelValue":e[1]||(e[1]=o=>a(d).gid=o),placeholder:"商品原始ID",clearable:"",onKeyup:$(a(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(g,{class:"w-[280px]",label:"用户UID"},{default:t(()=>[l(r,{modelValue:a(d).uid,"onUpdate:modelValue":e[2]||(e[2]=o=>a(d).uid=o),placeholder:"输入用户uid",clearable:"",onKeyup:$(a(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(g,{class:"w-[280px]",label:"状态"},{default:t(()=>[l(M,{modelValue:a(d).status,"onUpdate:modelValue":e[3]||(e[3]=o=>a(d).status=o)},{default:t(()=>[l(S,{label:"全部",value:""}),l(S,{label:"显示",value:1}),l(S,{label:"隐藏",value:0})]),_:1},8,["modelValue"])]),_:1}),l(g,null,{default:t(()=>[l(p,{type:"primary",onClick:a(E)},{default:t(()=>e[10]||(e[10]=[i("查询")])),_:1},8,["onClick"]),l(p,{onClick:a(A)},{default:t(()=>e[11]||(e[11]=[i("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),l(K,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[c((m(),u(X,{size:"large",data:a(w).lists,onSelectionChange:z},{default:t(()=>[l(n,{type:"selection",width:"55"}),l(n,{label:"ID",prop:"id","min-width":"80"}),l(n,{label:"商品原始ID",prop:"gid","min-width":"80"}),l(n,{label:"商品图片","min-width":"100"},{default:t(({row:o})=>[o.image?(m(),u(W,{key:0,src:o.image,width:60,height:45,"preview-src-list":[o.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):G("",!0)]),_:1}),l(n,{label:"归属用户","min-width":"180"},{default:t(({row:o})=>[i(_(o.user_name)+"（"+_(o.uid)+"） ",1)]),_:1}),l(n,{label:"标题",prop:"name","min-width":"160","show-tooltip-when-overflow":""}),l(n,{label:"商品价格","min-width":"120"},{default:t(({row:o})=>[i(_(o.amount)+" "+_(o.fee_type),1)]),_:1}),l(n,{label:"商品价格","min-width":"120"},{default:t(({row:o})=>[i(_(o.reality_amount)+" "+_(o.fee_type),1)]),_:1}),l(n,{label:"排序",prop:"sort","min-width":"100"}),l(n,{label:"修改时间",prop:"update_time","min-width":"120"}),l(n,{label:"修改人",prop:"update_name","min-width":"120"}),l(n,{label:"创建时间",prop:"create_time","min-width":"120"}),l(n,{label:"操作",width:"200",fixed:"right"},{default:t(({row:o})=>[c((m(),u(p,{type:"primary",link:"",onClick:C=>j(o)},{default:t(()=>e[12]||(e[12]=[i(" 创建订单 ")])),_:2},1032,["onClick"])),[[h,["waimai.userGoods/addOrder"]]]),c((m(),u(p,{type:"primary",link:"",onClick:C=>q(o)},{default:t(()=>e[13]||(e[13]=[i(" 编辑 ")])),_:2},1032,["onClick"])),[[h,["waimai.userGoods/edit","waimai.userGoods/add:edit"]]]),c((m(),u(p,{type:"primary",link:"",onClick:C=>J(o.id)},{default:t(()=>e[14]||(e[14]=[i(" 重置 ")])),_:2},1032,["onClick"])),[[h,["waimai.userGoods/huifu"]]]),c((m(),u(p,{type:"danger",link:"",onClick:C=>Y(o.id)},{default:t(()=>e[15]||(e[15]=[i(" 删除 ")])),_:2},1032,["onClick"])),[[h,["waimai.userGoods/delete"]]])]),_:1})]),_:1},8,["data"])),[[te,a(w).loading]]),D("div",Ie,[l(Z,{modelValue:a(w),"onUpdate:modelValue":e[4]||(e[4]=o=>I(w)?w.value=o:null),onChange:a(f)},null,8,["modelValue","onChange"])])]),_:1}),a(V)?(m(),u(xe,{key:0,ref_key:"editRef",ref:x,onSuccess:a(f),onClose:e[5]||(e[5]=o=>V.value=!1)},null,8,["onSuccess"])):G("",!0),a(U)?(m(),u(Se,{key:1,ref_key:"orderRef",ref:k,onSuccess:H,onClose:e[6]||(e[6]=o=>V.value=!1)},null,512)):G("",!0),l(oe,{modelValue:a(v),"onUpdate:modelValue":e[9]||(e[9]=o=>I(v)?v.value=o:null),"show-close":!1,width:"500"},{header:t(({close:o,titleId:C,titleClass:ne})=>[D("div",Ue,[D("h4",{id:C,class:re(ne)},[e[17]||(e[17]=i("收银台地址 ")),l(p,{type:"danger",class:"float-right",onClick:e[7]||(e[7]=Fe=>v.value=!1)},{default:t(()=>[l(R,{class:"el-icon--left"},{default:t(()=>[l(ee)]),_:1}),e[16]||(e[16]=i(" 关闭 "))]),_:1})],10,Ke)])]),default:t(()=>[D("div",null,[l(r,{modelValue:a(y),"onUpdate:modelValue":e[8]||(e[8]=o=>I(y)?y.value=o:null),style:{"max-width":"600px"},placeholder:"url"},{append:t(()=>[c((m(),u(p,{type:"primary",class:"float-right"},{default:t(()=>[l(R,{class:"el-icon--left"},{default:t(()=>[l(le)]),_:1}),e[18]||(e[18]=i(" 复制 "))]),_:1})),[[ae,a(y)]])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}});export{ul as default};
