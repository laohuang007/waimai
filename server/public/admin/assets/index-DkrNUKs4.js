import{d as R,s as D,j as X,i as F,k as Y,z as Z,o as s,a as S,m as o,w as n,e as a,n as z,F as ee,r as oe,C as r,p as u,B as v,b as B,G as E,D as te,H as V,I as ae,E as le,v as ne,q as ie,$ as se,J as me,K as re}from"./index-CSq49O89.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang-CwpZ7A-x.js";import{E as pe,a as ue}from"./el-table-column-afY-Q-c0.js";import"./el-checkbox-Duk-MLvO.js";import"./el-tag-DCrYKok3.js";import{E as ce}from"./el-card-1PlMbrNj.js";import{E as _e,a as fe}from"./el-form-item-D2KaSZi6.js";import{_ as ve}from"./index.vue_vue_type_script_setup_true_lang-DMGlkOsl.js";import{E as be,a as ye}from"./el-select-myCgb1GQ.js";import{d as K,a as we,e as he}from"./admin-CKnxMmuh.js";import{r as ke}from"./role-DHLAGC4l.js";import{u as ge}from"./useDictOptions-B46o9f4U.js";import{u as Ce}from"./usePaging-BVI2Oa_R.js";import{_ as Ee}from"./edit.vue_vue_type_script_setup_true_lang-BNywjCOW.js";import{_ as Ve}from"./money.vue_vue_type_script_setup_true_lang-Ds9VwPjZ.js";import"./isEqual-CRCllESj.js";import"./_Uint8Array-RBynhHOx.js";import"./_initCloneObject-BqQRiPFL.js";import"./_baseClone-BTZRmIOm.js";/* empty css                       */import"./el-radio-XfEkhgbg.js";import"./index-BSLFXMtF.js";import"./index-CB0jx4a8.js";import"./index-DaxyzSap.js";import"./token-DI9FKtlJ.js";import"./el-tree-CPgl9nFa.js";import"./el-tree-select-DPxVB4lO.js";import"./picker-B5B6R_zK.js";import"./index-B54jx6w6.js";import"./index-Kx7Gr6CY.js";import"./index-Dyr4F-P4.js";import"./index.vue_vue_type_script_setup_true_lang-aMUdrref.js";import"./el-popover-B8L4KBZS.js";import"./department-CL1YnJx0.js";import"./post-B20_fT6k.js";const xe={class:"admin"},$e={class:"mt-4"},De={class:"flex mt-4 justify-end"},Fe=R({name:"admin"}),co=R({...Fe,setup(Se){const y=D(),k=D(),m=X({account:"",name:"",role_id:""}),g=F(!1),w=F(!1),{pager:c,getLists:_,resetParams:U,resetPage:C}=Ce({fetchFun:K,params:m}),I=l=>{we({id:l.id,avatar:l.avatar,account:l.account,name:l.name,role_id:l.role_id,job_id:l.job_id,dept_id:l.dept_id,disable:l.disable,multipoint_login:l.multipoint_login}).finally(()=>{_()})},P=async()=>{var l;w.value=!0,await V(),(l=y.value)==null||l.open("add")},j=async l=>{var e,d;w.value=!0,await V(),(e=y.value)==null||e.open("edit"),(d=y.value)==null||d.setFormData(l)},L=async l=>{var e,d;g.value=!0,await V(),(e=k.value)==null||e.open(),(d=k.value)==null||d.setFormData(l)},N=async l=>{await ae.confirm("确定要删除？"),await he({id:l}),_()},{optionsData:T}=ge({role:{api:ke}});return Y(()=>{_()}),(l,e)=>{const d=le,h=_e,x=be,A=ye,f=ne,M=ve,O=fe,$=ce,q=ie,i=pe,G=se,H=me,J=ue,Q=de,b=Z("perms"),W=re;return s(),S("div",xe,[o($,{class:"!border-none",shadow:"never"},{default:n(()=>[o(O,{class:"mb-[-16px]",model:a(m),inline:""},{default:n(()=>[o(h,{class:"w-[280px]",label:"管理员账号"},{default:n(()=>[o(d,{modelValue:a(m).account,"onUpdate:modelValue":e[0]||(e[0]=t=>a(m).account=t),placeholder:"请输入管理员账号",clearable:"",onKeyup:z(a(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(h,{class:"w-[280px]",label:"管理员名称"},{default:n(()=>[o(d,{modelValue:a(m).name,"onUpdate:modelValue":e[1]||(e[1]=t=>a(m).name=t),placeholder:"请输入管理员名称",clearable:"",onKeyup:z(a(C),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(h,{class:"w-[280px]",label:"管理员角色"},{default:n(()=>[o(A,{modelValue:a(m).role_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a(m).role_id=t)},{default:n(()=>[o(x,{label:"全部",value:""}),(s(!0),S(ee,null,oe(a(T).role,(t,p)=>(s(),r(x,{key:p,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(h,null,{default:n(()=>[o(f,{type:"primary",onClick:a(C)},{default:n(()=>e[6]||(e[6]=[u("查询")])),_:1},8,["onClick"]),o(f,{onClick:a(U)},{default:n(()=>e[7]||(e[7]=[u("重置")])),_:1},8,["onClick"]),o(M,{class:"ml-2.5","fetch-fun":a(K),params:a(m),"page-size":a(c).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),v((s(),r($,{class:"mt-4 !border-none",shadow:"never"},{default:n(()=>[v((s(),r(f,{type:"primary",onClick:P},{icon:n(()=>[o(q,{name:"el-icon-Plus"})]),default:n(()=>[e[8]||(e[8]=u(" 新增 "))]),_:1})),[[b,["auth.admin/add"]]]),B("div",$e,[o(J,{data:a(c).lists,size:"large"},{default:n(()=>[o(i,{label:"ID",prop:"id","min-width":"60"}),e[12]||(e[12]=u("> ")),o(i,{label:"头像","min-width":"100"},{default:n(({row:t})=>[o(G,{size:50,src:t.avatar},null,8,["src"])]),_:1}),o(i,{label:"账号",prop:"account","min-width":"100"}),o(i,{label:"名称",prop:"name","min-width":"100"}),o(i,{label:"角色",prop:"role_name","min-width":"100","show-tooltip-when-overflow":""}),o(i,{label:"部门",prop:"dept_name","min-width":"100","show-tooltip-when-overflow":""}),o(i,{label:"余额",prop:"user_money","min-width":"100"}),o(i,{label:"累计充值",prop:"total_recharge_amount","min-width":"100"}),o(i,{label:"创建时间",prop:"create_time","min-width":"180"}),o(i,{label:"最近登录时间",prop:"login_time","min-width":"180"}),o(i,{label:"最近登录IP",prop:"login_ip","min-width":"120"}),v((s(),r(i,{label:"状态","min-width":"100"},{default:n(({row:t})=>[o(H,{modelValue:t.disable,"onUpdate:modelValue":p=>t.disable=p,"active-value":0,"inactive-value":1,disabled:t.root==1,onChange:p=>t.root!=1?I(t):""},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1})),[[b,["auth.admin/edit"]]]),o(i,{label:"操作",width:"120",fixed:"right"},{default:n(({row:t})=>[v((s(),r(f,{type:"primary",link:"",onClick:p=>j(t)},{default:n(()=>e[9]||(e[9]=[u(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["auth.admin/edit"]]]),v((s(),r(f,{type:"primary",link:"",onClick:p=>L(t)},{default:n(()=>e[10]||(e[10]=[u(" 余额 ")])),_:2},1032,["onClick"])),[[b,["auth.admin/money"]]]),t.root!=1?v((s(),r(f,{key:0,type:"danger",link:"",onClick:p=>N(t.id)},{default:n(()=>e[11]||(e[11]=[u(" 删除 ")])),_:2},1032,["onClick"])),[[b,["auth.admin/delete"]]]):E("",!0)]),_:1})]),_:1},8,["data"])]),B("div",De,[o(Q,{modelValue:a(c),"onUpdate:modelValue":e[3]||(e[3]=t=>te(c)?c.value=t:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:1})),[[W,a(c).loading]]),a(w)?(s(),r(Ee,{key:0,ref_key:"editRef",ref:y,onSuccess:a(_),onClose:e[4]||(e[4]=t=>w.value=!1)},null,8,["onSuccess"])):E("",!0),a(g)?(s(),r(Ve,{key:1,ref_key:"moneyRef",ref:k,onSuccess:a(_),onClose:e[5]||(e[5]=t=>g.value=!1)},null,8,["onSuccess"])):E("",!0)])}}});export{co as default};
