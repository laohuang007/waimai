import{d as z,i as h,j as $,N as ae,O as B,z as F,o as f,a as te,m as e,w as t,e as o,p as d,B as g,C as y,t as _,G as oe,b as c,D,Y as N,I as S,E as se,v as ne,_ as de,S as ie,K as re}from"./index-CSq49O89.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-CwpZ7A-x.js";import{E as ue,a as pe}from"./el-table-column-afY-Q-c0.js";import"./el-checkbox-Duk-MLvO.js";import"./el-tag-DCrYKok3.js";import{E as _e}from"./el-card-1PlMbrNj.js";import{E as fe,a as ce}from"./el-form-item-D2KaSZi6.js";import{E as be,a as ye}from"./el-select-myCgb1GQ.js";import{o as ve,b as we,c as Ve,e as ge,f as Ce}from"./orders-Dci8OKjt.js";import{u as ke}from"./usePaging-BVI2Oa_R.js";import{E as xe}from"./index-DaxyzSap.js";import{E as Ee}from"./index-CB0jx4a8.js";import"./isEqual-CRCllESj.js";import"./_Uint8Array-RBynhHOx.js";import"./_initCloneObject-BqQRiPFL.js";import"./_baseClone-BTZRmIOm.js";import"./token-DI9FKtlJ.js";const he={class:"orders-lists"},De={class:"flex justify-end mt-4"},Ue={class:"my-header"},Pe=["id"],Ie={class:"dialogbtn"},Te={class:"my-header"},Le=["id"],$e=z({name:"ordersLists"}),Xe=z({...$e,setup(Be){h([]);const C=h(!1),k=h(""),v=h(!1),r=$({statusText:[{text:"待支付",type:"info"},{text:"支付成功",type:"success"},{text:"支付失败",type:"danger"},{text:"超时关闭",type:"warning"},{text:"手动关闭",type:"warning"}],updatePrice:{id:"",order_amount:""}}),n=$({name:"",payid:"",status:"",uid:"",gid:"",order_sn:"",payer_id:"",payer_email:"",payer_name:""}),{pager:x,getLists:w,resetPage:j,resetParams:O}=ke({fetchFun:Ce,params:n}),R=async m=>{r.updatePrice={id:m.id,order_amount:m.order_amount},v.value=!0},q=async()=>{await ve({id:r.updatePrice.id,order_amount:r.updatePrice.order_amount}),v.value=!1,w()},A=async m=>{const a=await we({id:m.id});k.value=a.url,C.value=!0},G=async m=>{await S.confirm("确定要删除？"),await Ve({id:m}),w()},K=async m=>{await S.confirm("确定要关闭此订单？"),await ge({id:m}),w()};return ae(()=>{w()}),w(),(m,a)=>{const u=se,p=fe,V=be,Y=ye,i=ne,H=ce,I=_e,s=ue,J=de,M=xe,Q=pe,W=me,T=B("CircleCloseFilled"),U=ie,L=Ee,X=B("CopyDocument"),E=F("perms"),Z=re,ee=F("copy");return f(),te("div",he,[e(I,{class:"!border-none",shadow:"never"},{default:t(()=>[e(H,{ref:"formRef",class:"mb-[-16px]",model:o(n),inline:!0},{default:t(()=>[e(p,{class:"w-[280px]",label:"订单号"},{default:t(()=>[e(u,{modelValue:o(n).order_sn,"onUpdate:modelValue":a[0]||(a[0]=l=>o(n).order_sn=l),placeholder:"输入订单号",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"商品名称"},{default:t(()=>[e(u,{modelValue:o(n).name,"onUpdate:modelValue":a[1]||(a[1]=l=>o(n).name=l),placeholder:"输入商品名称",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"支付邮箱"},{default:t(()=>[e(u,{modelValue:o(n).payer_email,"onUpdate:modelValue":a[2]||(a[2]=l=>o(n).payer_email=l),placeholder:"输入支付邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"支付姓名"},{default:t(()=>[e(u,{modelValue:o(n).payer_name,"onUpdate:modelValue":a[3]||(a[3]=l=>o(n).payer_name=l),placeholder:"输入支付姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"支付通道ID"},{default:t(()=>[e(u,{modelValue:o(n).payid,"onUpdate:modelValue":a[4]||(a[4]=l=>o(n).payid=l),placeholder:"输入支付通道ID",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"用户ID"},{default:t(()=>[e(u,{modelValue:o(n).uid,"onUpdate:modelValue":a[5]||(a[5]=l=>o(n).uid=l),placeholder:"输入用户ID",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"商品原始ID"},{default:t(()=>[e(u,{modelValue:o(n).gid,"onUpdate:modelValue":a[6]||(a[6]=l=>o(n).gid=l),placeholder:"输入商品原始ID",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{class:"w-[280px]",label:"状态"},{default:t(()=>[e(Y,{modelValue:o(n).status,"onUpdate:modelValue":a[7]||(a[7]=l=>o(n).status=l)},{default:t(()=>[e(V,{label:"全部",value:""}),e(V,{label:"待支付",value:0}),e(V,{label:"支付成功",value:1}),e(V,{label:"支付失败",value:2}),e(V,{label:"超时关闭",value:3}),e(V,{label:"手动关闭",value:4})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(i,{type:"primary",onClick:o(j)},{default:t(()=>a[15]||(a[15]=[d("查询")])),_:1},8,["onClick"]),e(i,{onClick:o(O)},{default:t(()=>a[16]||(a[16]=[d("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(I,{class:"!border-none mt-4",shadow:"never"},{default:t(()=>[g((f(),y(Q,{size:"large",data:o(x).lists},{default:t(()=>[e(s,{label:"订单号",prop:"order_sn","min-width":"220"}),e(s,{label:"所属用户","min-width":"120"},{default:t(({row:l})=>[d(_(l.user_name)+"("+_(l.uid)+") ",1)]),_:1}),e(s,{label:"商品图片","min-width":"100"},{default:t(({row:l})=>[l.image?(f(),y(J,{key:0,src:l.image,width:60,height:45,"preview-src-list":[l.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):oe("",!0)]),_:1}),e(s,{label:"商品原始ID",prop:"gid","min-width":"100","show-tooltip-when-overflow":""}),e(s,{label:"支付通道ID",prop:"payid","min-width":"100","show-tooltip-when-overflow":""}),e(s,{label:"商品名称",prop:"name","min-width":"160","show-tooltip-when-overflow":""}),e(s,{label:"商品价格","min-width":"120"},{default:t(({row:l})=>[d(_(l.amount)+" "+_(l.fee_type),1)]),_:1}),e(s,{label:"订单价格","min-width":"120"},{default:t(({row:l})=>[d(_(l.order_amount)+" "+_(l.fee_type),1)]),_:1}),e(s,{label:"手续费","min-width":"120"},{default:t(({row:l})=>[d(_(l.rate)+" "+_(l.fee_type),1)]),_:1}),e(s,{label:"状态","min-width":"100"},{default:t(({row:l})=>[e(M,{type:o(r).statusText[l.status]?o(r).statusText[l.status].type:"primary"},{default:t(()=>[d(_(o(r).statusText[l.status]?o(r).statusText[l.status].text:"未知"),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"支付时间",prop:"pay_time","min-width":"150"}),e(s,{label:"支付人id",prop:"payer_id","min-width":"150"}),e(s,{label:"支付人邮箱",prop:"payer_email","min-width":"150"}),e(s,{label:"支付人姓名",prop:"payer_name","min-width":"150"}),e(s,{label:"修改时间",prop:"update_time","min-width":"150"}),e(s,{label:"修改人",prop:"update_name","min-width":"120"}),e(s,{label:"创建时间",prop:"create_time","min-width":"150"}),e(s,{label:"创建人",prop:"create_name","min-width":"120"}),e(s,{label:"操作",width:"210",fixed:"right",align:"center"},{default:t(({row:l})=>[g((f(),y(i,{type:"primary",link:"",disabled:l.status!=0,onClick:b=>R(l)},{default:t(()=>a[17]||(a[17]=[d(" 改价 ")])),_:2},1032,["disabled","onClick"])),[[E,["waimai.orders/updatePrice"]]]),g((f(),y(i,{type:"primary",link:"",disabled:l.status!=0,onClick:b=>A(l)},{default:t(()=>a[18]||(a[18]=[d(" 链接 ")])),_:2},1032,["disabled","onClick"])),[[E,["waimai.orders/looklink"]]]),g((f(),y(i,{type:"danger",link:"",disabled:l.status!=0,onClick:b=>K(l.id)},{default:t(()=>a[19]||(a[19]=[d(" 关闭 ")])),_:2},1032,["disabled","onClick"])),[[E,["waimai.orders/close"]]]),g((f(),y(i,{type:"danger",link:"",disabled:l.status!=0,onClick:b=>G(l.id)},{default:t(()=>a[20]||(a[20]=[d(" 删除 ")])),_:2},1032,["disabled","onClick"])),[[E,["waimai.orders/delete"]]])]),_:1})]),_:1},8,["data"])),[[Z,o(x).loading]]),c("div",De,[e(W,{modelValue:o(x),"onUpdate:modelValue":a[8]||(a[8]=l=>D(x)?x.value=l:null),onChange:o(w)},null,8,["modelValue","onChange"])])]),_:1}),e(L,{modelValue:o(v),"onUpdate:modelValue":a[11]||(a[11]=l=>D(v)?v.value=l:null),"show-close":!1,width:"500"},{header:t(({close:l,titleId:b,titleClass:P})=>[c("div",Ue,[c("h4",{id:b,class:N(P)},[a[22]||(a[22]=d("修改订单价格 ")),e(i,{type:"danger",class:"float-right",onClick:a[9]||(a[9]=le=>v.value=!1)},{default:t(()=>[e(U,{class:"el-icon--left"},{default:t(()=>[e(T)]),_:1}),a[21]||(a[21]=d(" 关闭 "))]),_:1})],10,Pe)])]),default:t(()=>[c("div",null,[e(u,{modelValue:o(r).updatePrice.order_amount,"onUpdate:modelValue":a[10]||(a[10]=l=>o(r).updatePrice.order_amount=l),placeholder:"请输入订单价格"},null,8,["modelValue"])]),c("div",Ie,[e(i,{type:"primary",onClick:q},{default:t(()=>a[23]||(a[23]=[d("确定")])),_:1})])]),_:1},8,["modelValue"]),e(L,{modelValue:o(C),"onUpdate:modelValue":a[14]||(a[14]=l=>D(C)?C.value=l:null),"show-close":!1,width:"500"},{header:t(({close:l,titleId:b,titleClass:P})=>[c("div",Te,[c("h4",{id:b,class:N(P)},[a[25]||(a[25]=d("收银台地址 ")),e(i,{type:"danger",class:"float-right",onClick:a[12]||(a[12]=le=>C.value=!1)},{default:t(()=>[e(U,{class:"el-icon--left"},{default:t(()=>[e(T)]),_:1}),a[24]||(a[24]=d(" 关闭 "))]),_:1})],10,Le)])]),default:t(()=>[c("div",null,[e(u,{modelValue:o(k),"onUpdate:modelValue":a[13]||(a[13]=l=>D(k)?k.value=l:null),style:{"max-width":"600px"},placeholder:"url"},{append:t(()=>[g((f(),y(i,{type:"primary",class:"float-right"},{default:t(()=>[e(U,{class:"el-icon--left"},{default:t(()=>[e(X)]),_:1}),a[26]||(a[26]=d(" 复制 "))]),_:1})),[[ee,o(k)]])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}});export{Xe as default};
