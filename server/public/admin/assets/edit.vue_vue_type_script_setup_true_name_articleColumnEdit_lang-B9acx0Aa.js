import{d as g,s as c,i as d,c as B,j as f,o as I,a as N,m as l,w as n,e as t,b as s,E as j,L as F}from"./index-CSq49O89.js";import{E as G,a as O}from"./el-form-item-D2KaSZi6.js";import{_ as P}from"./index.vue_vue_type_style_index_0_lang-Czh617Y2.js";import"./el-tag-DCrYKok3.js";import{E as z,a as L}from"./el-select-myCgb1GQ.js";import{_ as T}from"./picker-B5B6R_zK.js";import{u as $,p as A}from"./goods-D00gdu2c.js";import{P as H}from"./index-BSLFXMtF.js";const J={class:"edit-popup"},K={class:"xl:flex"},M={class:"w-80"},Q={class:"w-80"},W={class:"w-80"},X={class:"xl:ml-20"},Y=g({name:"articleColumnEdit"}),me=g({...Y,emits:["success","close"],setup(Z,{expose:V,emit:b}){const p=b,_=c(),i=c(),v=d("add"),w=B(()=>v.value=="edit"?"编辑商品":"批量分配商品");d(!1),d([]);const o=f({id:"",name:"",image:"",amount:"",reality_amount:"",fee_type:"",content:"",sort:0,status:1}),y=f({name:[{required:!0,message:"请输入标题",trigger:"blur"}],cid:[{required:!0,message:"请选择分类",trigger:"blur"}],image:[{required:!0,message:"请上传商品图片",trigger:"blur"}],amount:[{required:!0,message:"请填写商品价格",trigger:"blur"}],reality_amount:[{required:!0,message:"请填写商品实际价格",trigger:"blur"}]}),x=async()=>{var r,e;await((r=_.value)==null?void 0:r.validate()),await $(o),(e=i.value)==null||e.close(),p("success")},E=()=>{var r;(r=i.value)==null||r.open()},U=async r=>{const e=await A({id:r.id});Object.keys(o).forEach(u=>{o[u]=e[u]})},R=()=>{p("close")};return V({open:E,getDetail:U}),(r,e)=>{const u=j,m=G,q=T,C=z,h=L,k=F,D=P,S=O;return I(),N("div",J,[l(H,{ref_key:"popupRef",ref:i,title:t(w),async:!0,width:"550px",onConfirm:x,onClose:R,center:""},{default:n(()=>[l(S,{ref_key:"formRef",ref:_,class:"ls-form",model:t(o),"label-width":"85px",rules:t(y)},{default:n(()=>[s("div",K,[s("div",null,[l(m,{label:"标题",prop:"name"},{default:n(()=>[s("div",M,[l(u,{modelValue:t(o).name,"onUpdate:modelValue":e[0]||(e[0]=a=>t(o).name=a),placeholder:"请输入标题",type:"textarea",autosize:{minRows:3,maxRows:3},maxlength:"64","show-word-limit":"",clearable:""},null,8,["modelValue"])])]),_:1}),l(m,{label:"封面",prop:"image"},{default:n(()=>[s("div",null,[s("div",null,[l(q,{modelValue:t(o).image,"onUpdate:modelValue":e[1]||(e[1]=a=>t(o).image=a),limit:1},null,8,["modelValue"])]),e[7]||(e[7]=s("div",{class:"form-tips"},"建议尺寸：240*180px",-1))])]),_:1}),l(m,{label:"商品价格",prop:"amount"},{default:n(()=>[s("div",Q,[l(u,{modelValue:t(o).amount,"onUpdate:modelValue":e[2]||(e[2]=a=>t(o).amount=a),placeholder:"请输入商品价格"},null,8,["modelValue"])])]),_:1}),l(m,{label:"实际价格",prop:"reality_amount"},{default:n(()=>[s("div",W,[l(u,{modelValue:t(o).reality_amount,"onUpdate:modelValue":e[3]||(e[3]=a=>t(o).reality_amount=a),placeholder:"请输入商品实际价格"},null,8,["modelValue"])])]),_:1}),l(m,{label:"价格单位",required:"",prop:"fee_type"},{default:n(()=>[l(h,{class:"w-80",modelValue:t(o).fee_type,"onUpdate:modelValue":e[4]||(e[4]=a=>t(o).fee_type=a),placeholder:"价格单位",clearable:""},{default:n(()=>[l(C,{label:"USD",value:"USD"})]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"排序",prop:"sort"},{default:n(()=>[s("div",null,[l(k,{modelValue:t(o).sort,"onUpdate:modelValue":e[5]||(e[5]=a=>t(o).sort=a),min:0,max:9999},null,8,["modelValue"]),e[8]||(e[8]=s("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1))])]),_:1})]),s("div",X,[l(m,{label:"内容",prop:"content"},{default:n(()=>[l(D,{modelValue:t(o).content,"onUpdate:modelValue":e[6]||(e[6]=a=>t(o).content=a),height:667,width:375},null,8,["modelValue"])]),_:1})])])]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{me as _};
